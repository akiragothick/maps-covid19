function initialize(){function n(n){for(var u,o,t,i=n.split("\n"),f=[],e=i[0].split(","),r=1;r<i.length;r++){for(u={},o=i[r].split(","),t=0;t<e.length;t++)u[e[t]]=o[t];f.push(u)}return f}function t(t){function f(n){var t=new Date;t.setDate(t.getDate()+n);var i=t.getDate(),u=t.getMonth()+1,f=t.getFullYear();i<10&&(i="0"+i);u<10&&(u="0"+u);r=u+"-"+i+"-"+f}function e(){var t="https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_daily_reports/"+r+".csv";Promise.all([t].map(function(t){return fetch(t).then(n=>n.ok?n.text():Promise.reject(n.status)).then(function(t){return n(t)}).catch(n=>{console.log(n)})})).then(n=>{for(var h,r=n[0],u=2200,f=[],t=0;t<r.length;t++){var e=new google.maps.LatLng(r[t].Lat,r[t].Long_),o=r[t].Confirmed>u?u:r[t].Confirmed,s={location:e,weight:Math.pow(1.002,o)};f.push(s)}h=new google.maps.visualization.HeatmapLayer({data:f,dissipating:!0,maxIntensity:50,radius:25,map:i})}).catch(()=>{console.log("Error para la fecha "+r),f(-1),console.log("Se mostrar√° data de la fecha "+r),e()})}function c(n,t,i,r){var f={lat:parseFloat(u.latitude),lng:parseFloat(u.longitude)},e={lat:parseFloat(i),lng:parseFloat(r)};n.route({origin:f,destination:e,travelMode:"DRIVING"},function(n,i){i==="OK"?t.setDirections(n):window.alert("Directions request failed due to "+i)})}var u=t.coords,o={center:{lat:-12.031213,lng:-77.033409},zoom:3,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0},s=new google.maps.DirectionsService,h=new google.maps.DirectionsRenderer,l=new google.maps.Geocoder,i=new google.maps.Map(document.getElementById("map"),o),r="";f(0);e()}function i(n){n.code==1?$("#message").html("User denied the request for Geolocation."):n.code==2?$("#message").html("Location information is unavailable."):n.code==3?$("#message").html("The request to get user location timed out."):$("#message").html("An unknown error occurred.")}navigator.geolocation?navigator.geolocation.getCurrentPosition(t,i):$("#message").html("Geolocation is not supported by this browser.")}google.maps.event.addDomListener(window,"load",initialize);