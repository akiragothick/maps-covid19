function init(){function u(n){var t=n.target,i=n.target.feature.properties,u,f;t.hasOwnProperty("_popup")&&t.unbindPopup();t.bindPopup(r).openPopup();L.DomUtil.get("value-arc").textContent=i.arc;L.DomUtil.get("value-speed").textContent=i.speed;u=L.DomUtil.get("input-speed");u.value=i.speed;L.DomEvent.addListener(u,"change",function(n){i.speed=n.target.value});f=L.DomUtil.get("button-submit");L.DomEvent.addListener(f,"click",function(){t.closePopup()})}function f(){for(var r,i=0;i<300;i++)r=L.marker(e(n)),t.addLayer(r);return!1}function e(n){var i=n.getBounds(),t=i.getSouthWest(),r=i.getNorthEast(),u=r.lng-t.lng,f=r.lat-t.lat;return L.latLng(t.lat+f*Math.random(),t.lng+u*Math.random())}function o(t){var i=t.accuracy/16;L.geoJson({type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[t.latlng.lng,t.latlng.lat]},properties:{arc:321,speed:123}}]},{onEachFeature:function(n,t){t.on("click",u)}}).addTo(n);L.circle(t.latlng,i).addTo(n)}function s(){}function h(){n.locate({setView:!0,maxZoom:i})}var r='<form id="popup-form">      <label for="input-speed">New speed:<\/label>      <input id="input-speed" class="popup-input" type="number" />      <table class="popup-table">        <tr class="popup-table-row">          <th class="popup-table-header">Arc numer:<\/th>          <td id="value-arc" class="popup-table-data"><\/td>        <\/tr>        <tr class="popup-table-row">          <th class="popup-table-header">Current speed:<\/th>          <td id="value-speed" class="popup-table-data"><\/td>        <\/tr>      <\/table>      <button id="button-submit" type="button">Save Changes<\/button>    <\/form>',i=17,n=L.map("map",{center:L.latLng(-12.031213,-77.033409),zoom:i}),t;L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{maxZoom:i,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap<\/a> contributors',crossOrigin:"https://wiki.openstreetmap.org"}).addTo(n);t=L.markerClusterGroup({spiderfyOnMaxZoom:!1,singleMarkerMode:!0,polygonOptions:{color:"rgba(0,0,0,0)"}});t.on("clusterclick",function(n){n.layer.zoomToBounds()});n.addLayer(t);f();n.on("locationfound",o);n.on("locationerror",s);h()}init();